<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Kelgrand Reports</title>
		<link rel="icon" href="/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="/milligram.min.css">
	</head>
	<body>
	
		<main style="margin-top: 70px; color: #232129; text-align: center;">
			
			<h1>
				Generate PDFs,<br />
				extract data from your SaaS app.
			</h1>
			<p>
				We were developing web app and needed to generate PDF reports.<br />
				There was no well-suited solution so we build one. ðŸŽ‰ ðŸŽ‰ ðŸŽ‰
			</p>

			<div style="display: flex; justify-content: center; margin: 60px 0 50px 0;">
				<a href='/samples' class='button button-large button-outline2' style="margin-right: 4rem">
					Sample Report
				</a>
				<a href='/editor' class='button button-large button-outline2'>
					Open Editor
				</a>
			</div>

			<h3>
				Features
			</h3>
			<p>
				Async functions, Custom Widgets, Export to CSV, Multilingual, Subreports ...
			</p>

			<h3>
				Want to learn more?
			</h3>
			<form id='form-tell-me-more'>
				<div style="display: flex; justify-content: center;">
					<input
						type='email'
						placeholder='Enter email to learn more'
						style="max-width: 30rem; margin-right: 1rem;"
					/>
					<button
						type='submit'
						class='button button-small button-outline'
					>
						Tell me more
					</button>
				</div>
				<p>
					<small>
						Or send email to <a href='mailto:info@kelgrand.com'>info@kelgrand.com</a>
					</small>
				</p>
			</form>

		</main>

		<script src="https://www.google.com/recaptcha/api.js?render=6LcoIgUcAAAAABZEpxNOpXZw1J0tr2nmmAewH09t"></script>
		<script>
			async function captcha(token, action) {
				const prms = new Promise((resolve) => {
					grecaptcha.ready(resolve)
				})
				await prms
				return grecaptcha.execute(token, {action})
			}
			const form = document.getElementById('form-tell-me-more')
			const input = form.querySelector('input[type=email]')
			form.onsubmit = async (e) => {
				e.preventDefault()
				const captchaToken = await captcha('6LcoIgUcAAAAABZEpxNOpXZw1J0tr2nmmAewH09t', 'subscribe')
				const rq = {
					email: input.value,
					captchaToken,
				}
				try {
					const r = await fetch('/.netlify/functions/contactSubscribe', {
						method: 'POST',
						body: JSON.stringify(rq),
						headers: {
							'Content-Type': 'application/json',
						},
					})
					if (!r.ok) {
						let msg = 'unknown error'
						try {
							const js = await r.json()
							if (typeof js === 'object' && typeof js.msg === 'string') {
								msg = js.msg
							}
						}
						catch(e) { }
						throw new Error(msg)
					}
					alert('OK')
				}
				catch(e) {
					alert(`Error: ${String(e)}`)
				}
			}
		</script>
	</body>
</html>
